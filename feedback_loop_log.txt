≡ƒÜÇ Starting Agent Feedback Loop Test...
[SERVER LOG] [DEBUG] Starting Unified MCP Server.
[SERVER LOG] 2025-11-29T02:52:18.361Z [INFO] Γ£ô n8n API configured and available
[SERVER LOG] 2025-11-29T02:52:18.361Z [INFO] [LazyInit] Starting background initialization
[SERVER LOG] 2025-11-29T02:52:18.361Z [INFO] [LazyInit] Phase 1: Opening database
[SERVER LOG] 2025-11-29T02:52:18.365Z [INFO] [OllamaClient] Initialized {"baseUrl":"http://ollama:11434","timeout":60000}
[SERVER LOG] 2025-11-29T02:52:18.365Z [INFO] [OllamaClient] Initialized {"baseUrl":"http://ollama:11434","timeout":60000}
[SERVER LOG] 2025-11-29T02:52:18.365Z [INFO] GraphRAG Learning Service initialized {"embeddingModel":"nomic-embed-text","generationModel":"qwen2.5:3b","embeddingDimension":768,"mode":"active-llm"}
[SERVER LOG] 2025-11-29T02:52:18.365Z [INFO] Starting Graph Optimization Service...
[SERVER LOG] 2025-11-29T02:52:18.368Z [INFO] ≡ƒôª Detected n8n version change: none ΓåÆ 1.121.3
[SERVER LOG] 2025-11-29T02:52:18.368Z [INFO] ≡ƒôª Detected n8n-core version change: none ΓåÆ 1.120.2
[SERVER LOG] 2025-11-29T02:52:18.368Z [INFO] ≡ƒôª Detected n8n-workflow version change: none ΓåÆ 1.118.2
[SERVER LOG] 2025-11-29T02:52:18.368Z [INFO] ≡ƒôª Detected @n8n/n8n-nodes-langchain version change: none ΓåÆ 1.120.2
[SERVER LOG] 2025-11-29T02:52:18.369Z [WARN] ΓÜá∩╕Å  n8n packages have been updated since last database build!
[SERVER LOG] 2025-11-29T02:52:18.369Z [WARN]    - n8n: none ΓåÆ 1.121.3
[SERVER LOG] 2025-11-29T02:52:18.369Z [WARN]    - n8n-core: none ΓåÆ 1.120.2
[SERVER LOG] 2025-11-29T02:52:18.369Z [WARN]    - n8n-workflow: none ΓåÆ 1.118.2
[SERVER LOG] 2025-11-29T02:52:18.369Z [WARN]    - @n8n/n8n-nodes-langchain: none ΓåÆ 1.120.2
[SERVER LOG] 2025-11-29T02:52:18.370Z [INFO] [Nano Agents] Initializing GraphRAG orchestrator...
[SERVER LOG] 2025-11-29T02:52:18.370Z [INFO] [GraphRAG Orchestrator] Initialized without LLM clients (rule-based fallback)
[SERVER LOG] 2025-11-29T02:52:18.370Z [INFO] [GraphRAG Orchestrator] Configuration: {"enableGraphRAG":true,"maxAgentRetries":2,"agentTimeoutMs":30000,"shareGraphInsights":true}
[SERVER LOG] 2025-11-29T02:52:18.370Z [INFO] [GraphRAG Orchestrator] Initializing agents...
[SERVER LOG] 2025-11-29T02:52:18.373Z [INFO] SharedMemory Shared memory initialized successfully
[SERVER LOG] 2025-11-29T02:52:18.373Z [INFO] Agent[pattern-agent] Initializing agent: Pattern Discovery Agent
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] [APISchemaLoader] API schema loaded successfully (v1.1.1)
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Unified MCP Server running on stdio
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Agent[pattern-agent] Pattern agent initialized with 10 patterns (keyword matching only - no LLM)
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Agent[workflow-agent] Initializing agent: Workflow Generation Agent
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Agent[workflow-agent] Workflow agent initialized with 10 node templates
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Agent[validator-agent] Initializing agent: Workflow Validation Agent
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] Agent[validator-agent] Validator agent initialized with 22 known node types
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] [GraphRAG Orchestrator] All agents initialized
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] [Nano Agents] Orchestrator ready
[SERVER LOG] 2025-11-29T02:52:18.374Z [INFO] [Server] Γ£à Nano agent orchestrator initialized
Γ£à Server Initialized
≡ƒôñ Sending create_workflow request with suboptimal workflow...
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] Loaded existing database from C:\Users\Chris Boyd\Documents\MCP-Servers\One-Stop-Shop-N8N-MCP\data\nodes.db
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [LazyInit] Database opened successfully
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [LazyInit] Phase 2: Creating repository
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [LazyInit] Repository created
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [LazyInit] Phase 3: Creating services
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [Cache] Auto-scaled to 1622MB (5.0% of 31.7GB RAM, 16367MB currently free)
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [Cache] Initialized with max 1622MB memory limit
[SERVER LOG] 2025-11-29T02:52:18.392Z [INFO] [LazyInit] Γ£à Background initialization complete in 31ms
[SERVER LOG] 2025-11-29T02:52:18.426Z [INFO] [Cache] Auto-scaled to 1622MB (5.0% of 31.7GB RAM, 16400MB currently free)
[SERVER LOG] 2025-11-29T02:52:18.426Z [INFO] [Cache] Initialized with max 1622MB memory limit
[SERVER LOG] 2025-11-29T02:52:18.427Z [INFO] Checking n8n instance node synchronization...
[SERVER LOG] 2025-11-29T02:52:18.442Z [INFO] [Cache] Auto-scaled to 1622MB (5.0% of 31.7GB RAM, 16392MB currently free)
[SERVER LOG] 2025-11-29T02:52:18.442Z [INFO] [Cache] Initialized with max 1622MB memory limit
[SERVER LOG] 2025-11-29T02:52:18.442Z [INFO] n8n API client initialized {"url":"http://localhost:5678"}
[SERVER LOG] 2025-11-29T02:52:18.443Z [INFO] SharedMemory Shared memory initialized successfully
[SERVER LOG] 2025-11-29T02:52:18.443Z [INFO] [HandlerSharedMemory] Initialized successfully
[SERVER LOG] 2025-11-29T02:52:18.443Z [INFO] [handleCreateWorkflow] Validating node parameters against MCP database
[SERVER LOG] 2025-11-29T02:52:18.443Z [INFO] [validateNodeParameters] Validating workflow node parameters {"nodeCount":2}
[SERVER LOG] 2025-11-29T02:52:18.453Z [INFO] [validateNodeParameters] All node parameters valid
[SERVER LOG] 2025-11-29T02:52:18.453Z [INFO] [handleCreateWorkflow] Node parameter validation passed
[SERVER LOG] 2025-11-29T02:52:18.453Z [INFO] [handleCreateWorkflow] Running semantic validation (built-in nodes first policy)
[SERVER LOG] 2025-11-29T02:52:18.454Z [INFO] 
[SERVER LOG] ≡ƒôè Workflow Semantic Validation Score: 0/100
[SERVER LOG] Γ¥î FAILED - Workflow needs improvement
[SERVER LOG] ΓÜá∩╕Å  Warnings (4):
[SERVER LOG]    Γ¥î CRITICAL: 100% of nodes are Code nodes (max 30%)
[SERVER LOG]    Node "Custom HTTP Request" might be replaceable with built-in nodes
[SERVER LOG]    Γ¥î Only 0 built-in nodes detected. Workflows should leverage n8n's built-in capabilities!
[SERVER LOG]    ΓÜá∩╕Å  Detected minimal architecture pattern (trigger + code). This is usually a sign of under-utilizing n8n's capabilities.
[SERVER LOG] ≡ƒÆí Suggestions (3):
[SERVER LOG]    ΓÇó This workflow relies too heavily on custom code. n8n has 525+ built-in nodes - please search for existing nodes first!
[SERVER LOG]    ΓÇó Start by searching for built-in nodes that match your requirements before writing custom code
[SERVER LOG]    ΓÇó Consider using built-in nodes for data transformation, HTTP requests, and business logic
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN] [handleCreateWorkflow] ΓÜá∩╕Å  Semantic validation score low: 0/100
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN] [handleCreateWorkflow] Workflow over-relies on Code nodes instead of built-in nodes
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN] [handleCreateWorkflow] Semantic Issues:
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    Γ¥î CRITICAL: 100% of nodes are Code nodes (max 30%)
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    Node "Custom HTTP Request" might be replaceable with built-in nodes
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    Γ¥î Only 0 built-in nodes detected. Workflows should leverage n8n's built-in capabilities!
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    ΓÜá∩╕Å  Detected minimal architecture pattern (trigger + code). This is usually a sign of under-utilizing n8n's capabilities.
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    ≡ƒÆí This workflow relies too heavily on custom code. n8n has 525+ built-in nodes - please search for existing nodes first!
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    ≡ƒÆí Start by searching for built-in nodes that match your requirements before writing custom code
[SERVER LOG] 2025-11-29T02:52:18.454Z [WARN]    ≡ƒÆí Consider using built-in nodes for data transformation, HTTP requests, and business logic
[SERVER LOG] 2025-11-29T02:52:18.454Z [INFO] [handleCreateWorkflow] Workflow not in validation cache, running validation via unified system
[SERVER LOG] 2025-11-29T02:52:18.454Z [INFO] [UnifiedValidation] Initialized unified validation system
[SERVER LOG] 2025-11-29T02:52:18.454Z [INFO] [UnifiedValidation] Running validation for workflow (profile: runtime)
[SERVER LOG] 2025-11-29T02:52:18.457Z [INFO] [handleCreateWorkflow] Immediate validation passed
[SERVER LOG] 2025-11-29T02:52:18.457Z [INFO] [handleCreateWorkflow] Running live n8n validation before creation
[SERVER LOG] 2025-11-29T02:52:18.462Z [WARN] n8n API client error {"name":"N8nNotFoundError","message":"Resource with ID not found not found","code":"NOT_FOUND","statusCode":404,"context":"n8n API Response"}
[SERVER LOG] 2025-11-29T02:52:18.533Z [WARN] n8n API client error {"name":"N8nNotFoundError","message":"Resource with ID not found not found","code":"NOT_FOUND","statusCode":404,"context":"n8n API Response"}
[SERVER LOG] 2025-11-29T02:52:18.535Z [WARN] n8n API client error {"name":"N8nNotFoundError","message":"Resource with ID not found not found","code":"NOT_FOUND","statusCode":404,"context":"n8n API Response"}
[SERVER LOG] 2025-11-29T02:52:18.541Z [INFO] [handleCreateWorkflow] Live validation passed
≡ƒôÑ Received response:
{
  "result": {
    "content": [
      {
        "type": "text",
        "text": "{\n  \"success\": true,\n  \"data\": {\n    \"name\": \"Suboptimal Workflow\",\n    \"nodes\": [\n      {\n        \"parameters\": {},\n        \"id\": \"manual-trigger\",\n        \"name\": \"When clicking 'Execute Workflow'\",\n        \"type\": \"n8n-nodes-base.manualTrigger\",\n        \"typeVersion\": 1,\n        \"position\": [\n          0,\n          0\n        ]\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const axios = require('axios');\\nreturn axios.get('https://example.com');\"\n        },\n        \"id\": \"code-node\",\n        \"name\": \"Custom HTTP Request\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 1,\n        \"position\": [\n          200,\n          0\n        ]\n      }\n    ],\n    \"connections\": {\n      \"When clicking 'Execute Workflow'\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Custom HTTP Request\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      }\n    },\n    \"settings\": {\n      \"executionOrder\": \"v1\",\n      \"callerPolicy\": \"workflowsFromSameOwner\",\n      \"availableInMCP\": false\n    },\n    \"active\": false,\n    \"versionId\": \"224400f3-08d8-4f05-9dc1-a73bbd28cb6e\",\n    \"id\": \"HkSKlGi1lLdWYS7o\",\n    \"description\": null,\n    \"staticData\": null,\n    \"meta\": null,\n    \"pinData\": null,\n    \"updatedAt\": \"2025-11-29T02:52:18.550Z\",\n    \"createdAt\": \"2025-11-29T02:52:18.550Z\",\n    \"isArchived\": false,\n    \"versionCounter\": 1,\n    \"triggerCount\": 0\n  },\n  \"message\": \"Workflow \\\"Suboptimal Workflow\\\" created successfully with ID: HkSKlGi1lLdWYS7o\"\n}"
      }
    ]
  },
  "jsonrpc": "2.0",
  "id": 2
}
