≡ƒÜÇ Starting Complex Workflow Agent Simulation...
   Server Path: C:\Users\Chris Boyd\Documents\MCP-Servers\One-Stop-Shop-N8N-MCP\src\mcp\index.ts

--- Step 1: Initialization ---
[DEBUG] Starting Unified MCP Server.
Γ£à Server Initialized

--- Step 2: Agent Discovery Phase ---
Agent: 'I need to build an Employee Onboarding workflow. Let me find the right nodes.'
Agent: Searching for 'webhook'...
   Γ£à Found: AWS SNS Trigger (nodes-base.awsSnsTrigger)
Agent: Searching for 'if'...
   Γ£à Found: AI Transform (nodes-base.aiTransform)
Agent: Searching for 'set'...
   Γ£à Found: Compare Datasets (nodes-base.compareDatasets)
Agent: Searching for 'slack'...
   Γ£à Found: Slack (nodes-base.slack)
Agent: Searching for 'gmail'...
   Γ£à Found: Gmail (nodes-base.gmail)

--- Step 3: Constructing Complex Workflow ---
Agent: 'Building workflow structure: Webhook -> Set Data -> IF (Dept) -> Slack -> Email'

--- Step 4: Validating Workflow ---
Agent: 'Verifying workflow integrity before upload...'
RAW VALIDATE RES: {
  "result": {
    "content": [
      {
        "type": "text",
        "text": "{\n  \"valid\": false,\n  \"validationCached\": true,\n  \"cacheHash\": \"9dy6vq\",\n  \"summary\": {\n    \"totalNodes\": 6,\n    \"enabledNodes\": 6,\n    \"triggerNodes\": 0,\n    \"validConnections\": 0,\n    \"invalidConnections\": 0,\n    \"expressionsValidated\": 0,\n    \"errorCount\": 1,\n    \"warningCount\": 0\n  },\n  \"errors\": [\n    {\n      \"node\": \"workflow\",\n      \"message\": \"Missing required property 'settings'. n8n API requires: nodes, connections, settings, name\"\n    }\n  ],\n  \"mode\": \"full\",\n  \"validationOptions\": {\n    \"validateNodes\": true,\n    \"validateConnections\": true,\n    \"validateExpressions\": true\n  },\n  \"modeDescription\": \"Complete validation including nodes, connections, and expressions\"\n}"
      }
    ]
  },
  "jsonrpc": "2.0",
  "id": 6
}
Γ£à Validation Result: FAILED
   Issues: undefined

--- Step 5: Uploading to n8n ---
Agent: 'Uploading workflow to n8n instance...'
RAW CREATE RES: {
  "result": {
    "content": [
      {
        "type": "text",
        "text": "{\n  \"success\": false,\n  \"error\": \"≡ƒÜ¿ VALIDATION FAILED: Workflow has known validation errors and cannot be created!\",\n  \"details\": {\n    \"errors\": [\n      \"Missing required property 'settings'. n8n API requires: nodes, connections, settings, name\"\n    ],\n    \"message\": \"Fix all validation errors before creating workflow\",\n    \"workflow\": \"1∩╕ÅΓâú validate_workflow ΓåÆ 2∩╕ÅΓâú Fix errors ΓåÆ 3∩╕ÅΓâú n8n_create_workflow\"\n  }\n}"
      }
    ]
  },
  "jsonrpc": "2.0",
  "id": 7
}
Γ£à Workflow Created Successfully!
   ID: undefined
   Name: undefined
   Active: undefined
≡ƒÆÑ Simulation failed: TypeError: Cannot read properties of undefined (reading 'length')

    at runSimulation (C:\Users\Chris Boyd\Documents\MCP-Servers\One-Stop-Shop-N8N-MCP\src\scripts\test-complex-workflow-creation.ts:323:45)
≡ƒ¢æ Ending Simulation...
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
